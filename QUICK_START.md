# üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç: Telegram –±–æ—Ç —Å Google –¢–∞–±–ª–∏—Ü–∞–º–∏

## üìã –ß—Ç–æ —É –Ω–∞—Å –µ—Å—Ç—å

–ú—ã —Å–æ–∑–¥–∞–ª–∏ –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π —Ç–µ—Å—Ç–æ–≤—ã–π Telegram –±–æ—Ç, –∫–æ—Ç–æ—Ä—ã–π –∏–Ω—Ç–µ–≥—Ä–∏—Ä—É–µ—Ç—Å—è —Å Google –¢–∞–±–ª–∏—Ü–∞–º–∏ –∏—Å–ø–æ–ª—å–∑—É—è –±–∏–±–ª–∏–æ—Ç–µ–∫—É **TGbot**.

### üìÅ –§–∞–π–ª—ã –ø—Ä–æ–µ–∫—Ç–∞:
- `test_bot.js` - –ü–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –±–æ—Ç
- `simple_test_bot.js` - –£–ø—Ä–æ—â–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- `examples.js` - –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π
- `SETUP_INSTRUCTIONS.md` - –ü–æ–¥—Ä–æ–±–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ
- `QUICK_START.md` - –≠—Ç–æ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ

## ‚ö° –ë—ã—Å—Ç—Ä—ã–π –∑–∞–ø—É—Å–∫ (5 –º–∏–Ω—É—Ç)

### 1. –°–æ–∑–¥–∞–π—Ç–µ –±–æ—Ç–∞ –≤ Telegram
```
1. –ù–∞–π–¥–∏—Ç–µ @BotFather –≤ Telegram
2. –û—Ç–ø—Ä–∞–≤—å—Ç–µ /newbot
3. –í–≤–µ–¥–∏—Ç–µ –∏–º—è: "Test Sheets Bot"
4. –í–≤–µ–¥–∏—Ç–µ username: "test_sheets_bot_123"
5. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ —Ç–æ–∫–µ–Ω
```

### 2. –°–æ–∑–¥–∞–π—Ç–µ Google Apps Script –ø—Ä–æ–µ–∫—Ç
```
1. –û—Ç–∫—Ä–æ–π—Ç–µ https://script.google.com/
2. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π –ø—Ä–æ–µ–∫—Ç
3. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ –±–∏–±–ª–∏–æ—Ç–µ–∫—É TGbot:
   ID: 1LyGnqsaphk-K_EB8ZxqcBRiKXRE2TY8oSHWlZn4HBje1WlmoNk51wGeg
```

### 3. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∫–æ–¥
```javascript
// –ó–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ –≤–∞—à–∏ –¥–∞–Ω–Ω—ã–µ
const BOT_TOKEN = "YOUR_BOT_TOKEN_HERE";
const WEBAPP_URL = "YOUR_WEBAPP_URL_HERE";

const Bot = TGbot.bot({ 
  botToken: BOT_TOKEN, 
  webAppUrl: WEBAPP_URL,
  logRequest: true 
});

const ss = SpreadsheetApp.getActiveSpreadsheet();

function doPost(e) {
  try {
    if (e?.postData?.contents) {
      const contents = JSON.parse(e.postData.contents);
      
      if (contents.message) {
        const msg = contents.message;
        const text = msg.text;
        const chat_id = msg.from.id;
        const user_name = msg.from.first_name;
        
        // –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ —Ç–∞–±–ª–∏—Ü—É
        saveMessage(msg, user_name);
        
        // –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –∫–æ–º–∞–Ω–¥—ã
        if (text === "/start") {
          Bot.sendMessage({
            chat_id: chat_id,
            text: `–ü—Ä–∏–≤–µ—Ç, ${user_name}! üëã\n\n–≠—Ç–æ —Ç–µ—Å—Ç–æ–≤—ã–π –±–æ—Ç –¥–ª—è Google –¢–∞–±–ª–∏—Ü.`
          });
        } else {
          Bot.sendMessage({
            chat_id: chat_id,
            text: `–í—ã –Ω–∞–ø–∏—Å–∞–ª–∏: "${text}"\n\n–°–æ–æ–±—â–µ–Ω–∏–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–æ –≤ —Ç–∞–±–ª–∏—Ü—É!`
          });
        }
      }
    }
  } catch (error) {
    console.error("–û—à–∏–±–∫–∞:", error);
  }
}

function saveMessage(msg, user_name) {
  try {
    let sheet = ss.getSheetByName("Messages");
    if (!sheet) {
      sheet = ss.insertSheet("Messages");
      sheet.setTabColor("BLUE");
      sheet.getRange(1, 1, 1, 4).setValues([["–î–∞—Ç–∞", "ID", "–ò–º—è", "–°–æ–æ–±—â–µ–Ω–∏–µ"]]);
    }
    
    const timestamp = new Date();
    const user_id = msg.from.id;
    const text = msg.text || "";
    
    sheet.appendRow([timestamp, user_id, user_name, text]);
  } catch (error) {
    console.error("–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è:", error);
  }
}

function setupWebhook() {
  const result = Bot.setWebhook({
    url: WEBAPP_URL,
    max_connections: 50
  });
  console.log("Webhook —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω:", result);
  return result;
}
```

### 4. –†–∞–∑–≤–µ—Ä–Ω–∏—Ç–µ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
```
1. –ù–∞–∂–º–∏—Ç–µ "–†–∞–∑–≤–µ—Ä–Ω—É—Ç—å" ‚Üí "–ù–æ–≤–æ–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ"
2. –¢–∏–ø: "–í–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ"
3. –í—ã–ø–æ–ª–Ω—è—Ç—å –æ—Ç –∏–º–µ–Ω–∏: –í—ã
4. –î–æ—Å—Ç—É–ø: –¢–æ–ª—å–∫–æ –≤—ã
5. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ URL
```

### 5. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ webhook
```
1. –ó–∞–º–µ–Ω–∏—Ç–µ WEBAPP_URL –Ω–∞ –ø–æ–ª—É—á–µ–Ω–Ω—ã–π URL
2. –ó–∞–º–µ–Ω–∏—Ç–µ BOT_TOKEN –Ω–∞ –≤–∞—à —Ç–æ–∫–µ–Ω
3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ñ—É–Ω–∫—Ü–∏—é setupWebhook()
```

### 6. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ
```
1. –ù–∞–π–¥–∏—Ç–µ –≤–∞—à–µ–≥–æ –±–æ—Ç–∞ –≤ Telegram
2. –û—Ç–ø—Ä–∞–≤—å—Ç–µ /start
3. –û—Ç–ø—Ä–∞–≤—å—Ç–µ –ª—é–±–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–∞–±–ª–∏—Ü—É - –ø–æ—è–≤–∏—Ç—Å—è –ª–∏—Å—Ç "Messages"
```

## üéØ –ß—Ç–æ —É–º–µ–µ—Ç –±–æ—Ç

### ‚úÖ –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:
- ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤—Å–µ—Ö —Å–æ–æ–±—â–µ–Ω–∏–π –≤ Google –¢–∞–±–ª–∏—Ü—ã
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–æ–º–∞–Ω–¥ (/start, /help, /stats)
- ‚úÖ –í–µ–¥–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- ‚úÖ –û—Ç–ø—Ä–∞–≤–∫–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
- ‚úÖ Inline –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã
- ‚úÖ –û—Ç–ø—Ä–∞–≤–∫–∞ –º–µ–¥–∏–∞—Ñ–∞–π–ª–æ–≤
- ‚úÖ –û–ø—Ä–æ—Å—ã –∏ –≤–∏–∫—Ç–æ—Ä–∏–Ω—ã
- ‚úÖ –í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –∫–∞–ª–µ–Ω–¥–∞—Ä—å
- ‚úÖ –≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö –≤ —Ñ–∞–π–ª—ã

### üìä –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–∞–±–ª–∏—Ü—ã:
- **Messages** (—Å–∏–Ω–∏–π) - –í—Å–µ —Å–æ–æ–±—â–µ–Ω–∏—è
- **Users** (–∑–µ–ª–µ–Ω—ã–π) - –°–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π  
- **Debug** (–∫—Ä–∞—Å–Ω—ã–π) - –õ–æ–≥–∏ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
- **Errors** (–æ—Ä–∞–Ω–∂–µ–≤—ã–π) - –û—à–∏–±–∫–∏

## üß™ –¢–µ—Å—Ç–æ–≤—ã–µ –∫–æ–º–∞–Ω–¥—ã

```
/start - –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞
/help - –°–ø—Ä–∞–≤–∫–∞
/stats - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
/users - –°–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
/addme - –î–æ–±–∞–≤–∏—Ç—å —Å–µ–±—è –≤ —Å–ø–∏—Å–æ–∫
```

## üîß –ü–æ–ª–µ–∑–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

### –ü—Ä–æ–≤–µ—Ä–∫–∞ webhook:
```javascript
function checkWebhook() {
  const info = Bot.getWebhookInfo();
  console.log("Webhook info:", info);
}
```

### –û—á–∏—Å—Ç–∫–∞ –ø—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö:
```javascript
function resetBot() {
  Bot.deleteWebhook();
  Bot.getUpdates({});
  Bot.setWebhook({ url: WEBAPP_URL });
}
```

### –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –±–æ—Ç–µ:
```javascript
function getBotInfo() {
  const info = Bot.getMe();
  console.log("Bot info:", info);
}
```

## üö® –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### –ë–æ—Ç –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ webhook: `checkWebhook()`
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ç–æ–∫–µ–Ω –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ URL –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

### –û—à–∏–±–∫–∏ –≤ —Ç–∞–±–ª–∏—Ü–µ:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ —Ç–∞–±–ª–∏—Ü–µ
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ç–∞–±–ª–∏—Ü–∞ –∞–∫—Ç–∏–≤–Ω–∞
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–∏—Å—Ç "Errors"

### –ü—Ä–æ–±–ª–µ–º—ã —Å –±–∏–±–ª–∏–æ—Ç–µ–∫–æ–π:
1. –ü–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–∏—Ç–µ –±–∏–±–ª–∏–æ—Ç–µ–∫—É TGbot
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤–µ—Ä—Å–∏—é –±–∏–±–ª–∏–æ—Ç–µ–∫–∏
3. –û–±–Ω–æ–≤–∏—Ç–µ –¥–æ –ø–æ—Å–ª–µ–¥–Ω–µ–π –≤–µ—Ä—Å–∏–∏

## üìà –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö –∫–æ–º–∞–Ω–¥:
```javascript
if (text === "/newcommand") {
  // –í–∞—à–∞ –ª–æ–≥–∏–∫–∞
}
```

### –†–∞–±–æ—Ç–∞ —Å –º–µ–¥–∏–∞—Ñ–∞–π–ª–∞–º–∏:
```javascript
if (msg.photo) {
  // –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–æ—Ç–æ
}
if (msg.document) {
  // –û–±—Ä–∞–±–æ—Ç–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
}
```

### –û—Ç–ø—Ä–∞–≤–∫–∞ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã:
```javascript
const Keyboard = TGbot.keyboard();
const keyboard = Keyboard.make([
  ["–ö–Ω–æ–ø–∫–∞ 1", "–ö–Ω–æ–ø–∫–∞ 2"]
], { columns: 2 }).inline();

Bot.sendMessage({
  chat_id: chat_id,
  text: "–í—ã–±–µ—Ä–∏—Ç–µ:",
  reply_markup: keyboard
});
```

## üéâ –ì–æ—Ç–æ–≤–æ!

–¢–µ–ø–µ—Ä—å —É –≤–∞—Å –µ—Å—Ç—å —Ä–∞–±–æ—Ç–∞—é—â–∏–π Telegram –±–æ—Ç, –∫–æ—Ç–æ—Ä—ã–π:
- –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤—Å–µ —Å–æ–æ–±—â–µ–Ω–∏—è –≤ Google –¢–∞–±–ª–∏—Ü—ã
- –í–µ–¥–µ—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Ä–∞–∑–ª–∏—á–Ω—ã–µ —Ç–∏–ø—ã —Å–æ–æ–±—â–µ–Ω–∏–π
- –ò–º–µ–µ—Ç –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã

**–°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:**
1. –ò–∑—É—á–∏—Ç–µ `examples.js` –¥–ª—è —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞
2. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã
3. –î–æ–±–∞–≤—å—Ç–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é —Å –¥—Ä—É–≥–∏–º–∏ Google —Å–µ—Ä–≤–∏—Å–∞–º–∏
4. –°–æ–∑–¥–∞–π—Ç–µ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–µ –æ—Ç—á–µ—Ç—ã –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫—É

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

- –ê–≤—Ç–æ—Ä –±–∏–±–ª–∏–æ—Ç–µ–∫–∏: https://t.me/nosaev_m
- –ì—Ä—É–ø–ø–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∏: https://t.me/googleappsscriptrc
- –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: https://core.telegram.org/bots/api 